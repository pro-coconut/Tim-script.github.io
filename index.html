<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>t√¨m script c·ªßa t√¢m dz</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Poppins',sans-serif;
  background:linear-gradient(135deg,#0b1220,#0e1627);
  color:#e6eef8;
}

/* HEADER */
header{
  position:sticky;
  top:0;
  z-index:1000;
  background:rgba(15,23,42,0.9);
  backdrop-filter:blur(10px);
  padding:16px;
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  gap:14px;
  border-bottom:1px solid #1f2a44;
}
.logo{
  font-size:22px;
  font-weight:700;
  background:linear-gradient(90deg,#38bdf8,#60a5fa);
  -webkit-background-clip:text;
  color:transparent;
}
.search-wrap{
  flex:1;
  display:flex;
  gap:10px;
}
.search-wrap input{
  flex:1;
  padding:12px 14px;
  border-radius:12px;
  border:1px solid #1f2a44;
  background:#0f1a28;
  color:white;
  font-size:15px;
  outline:none;
  transition:.2s;
}
.search-wrap input:focus{
  border-color:#38bdf8;
  box-shadow:0 0 10px #38bdf855;
}
.search-wrap button{
  padding:12px 18px;
  border-radius:12px;
  border:none;
  background:linear-gradient(90deg,#38bdf8,#0ea5e9);
  color:#04293a;
  font-weight:600;
  cursor:pointer;
  transition:.2s;
}
.search-wrap button:hover{
  transform:translateY(-2px);
  box-shadow:0 6px 16px #38bdf855;
}

/* MAIN */
.container{
  max-width:1200px;
  margin:auto;
  padding:20px 14px 60px;
}

h2{
  margin:30px 0 14px;
  font-weight:600;
  color:#38bdf8;
  border-left:4px solid #38bdf8;
  padding-left:10px;
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
  gap:18px;
}

/* CARD */
.card{
  background:#1e293b;
  border-radius:16px;
  overflow:hidden;
  cursor:pointer;
  transition:.25s;
  border:1px solid #1f2a44;
}
.card:hover{
  transform:translateY(-8px);
  box-shadow:0 12px 30px #00000066;
}

/* THUMB */
.thumb{
  height:160px;
  background:#071826;
  overflow:hidden;
}
.thumb img{
  width:100%;
  height:100%;
  object-fit:cover;
  transition:.3s;
}
.card:hover .thumb img{
  transform:scale(1.05);
}

/* CONTENT */
.content{
  padding:14px;
}
.title{
  font-size:15px;
  font-weight:600;
  margin-bottom:6px;
  min-height:40px;
}
.meta{
  font-size:13px;
  color:#94a3b8;
}

/* LOADER */
.loader{
  grid-column:1/-1;
  text-align:center;
  padding:30px;
  color:#94a3b8;
  font-size:14px;
}

/* MOBILE */
@media(max-width:600px){
  .thumb{height:130px}
  .logo{font-size:18px}
}
  .downloads-btn{
  padding:12px 20px;
  border-radius:14px;
  text-decoration:none;
  font-weight:700;
  font-size:15px;
  letter-spacing:.5px;
  color:white;
  background:linear-gradient(135deg,#f59e0b,#ef4444);
  box-shadow:0 8px 22px rgba(239,68,68,.45);
  transition:.3s;
  display:flex;
  align-items:center;
  gap:8px;
  white-space:nowrap;
  border:1px solid #ffffff22;
}

.downloads-btn:hover{
  transform:translateY(-3px) scale(1.03);
  box-shadow:0 12px 30px rgba(239,68,68,.6);
}
</style>
</head>

<body>

<header>
  <div class="logo">t√¨m script c·ªßa t√¢m dz</div>

  <div class="search-wrap">
    <input id="q" placeholder="T√¨m script (vd: blox fruit)..." />
    <button onclick="search()">T√¨m</button>
  </div>

  <!-- N√öT SI√äU N·ªîI -->
  <a href="downloads.html" class="downloads-btn">
    üì¶ Kho t·∫£i file
  </a>
</header>

<div class="container">

  <h2>üîé K·∫øt qu·∫£ t√¨m ki·∫øm</h2>
  <div id="results" class="grid"></div>

  <h2>üÜï Script m·ªõi nh·∫•t</h2>
  <div id="latest" class="grid"></div>

</div>

<script>
const API = "https://scriptblox.com/api/script/search";

function getThumb(s){
  return (
    s.image ||
    s.thumbnail ||
    s.game?.imageUrl ||
    "https://i.ibb.co/8gbRfFsp/images.png"
  );
}

function card(s){
  const thumb = getThumb(s);
  return `
    <div class="card" onclick="view('${s._id}')">
      <div class="thumb">
        <img src="${thumb}"
             onerror="this.onerror=null;this.src='https://i.ibb.co/8gbRfFsp/images.png'">
      </div>
      <div class="content">
        <div class="title">${s.title}</div>
        <div class="meta">${s.game?.name || ''}</div>
        <div class="meta">üëÅ ${s.views || 0} ‚Ä¢ ${s.owner?.username || ''}</div>
      </div>
    </div>
  `;
}

async function api(q){
  const url = `${API}?q=${encodeURIComponent(q)}&max=12`;
  const res = await fetch(url);
  const j = await res.json();
  return j.result?.scripts || [];
}

async function loadLatest(){
  document.getElementById('latest').innerHTML = '<div class="loader">ƒêang t·∫£i script m·ªõi...</div>';
  const data = await api("script");
  document.getElementById('latest').innerHTML = data.map(card).join('');
}

async function search(){
  const q = document.getElementById('q').value.trim();
  if(!q) return;
  document.getElementById('results').innerHTML = '<div class="loader">ƒêang t√¨m ki·∫øm...</div>';
  const data = await api(q);
  document.getElementById('results').innerHTML = data.map(card).join('');
}

function view(id){
  window.location.href = "view.html?id=" + id;
}

loadLatest();
</script>

</body>
</html>
