<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Xem script</title>

<style>
body{
  margin:0;
  font-family:Poppins, sans-serif;
  background:#0e1627;
  color:#e6eef8;
}
.container{
  max-width:900px;
  margin:auto;
  padding:20px;
}
img{
  width:100%;
  border-radius:12px;
  margin-bottom:15px;
}
h1{
  font-size:22px;
  margin-bottom:8px;
}
.meta{
  color:#94a3b8;
  margin-bottom:15px;
}
.copy-btn{
  display:inline-block;
  padding:10px 16px;
  margin-bottom:15px;
  border-radius:10px;
  background:linear-gradient(90deg,#38bdf8,#0ea5e9);
  color:#04293a;
  font-weight:600;
  cursor:pointer;
  border:none;
}
.copy-btn:hover{
  opacity:.9;
}
pre{
  background:#0b1220;
  padding:15px;
  border-radius:12px;
  overflow:auto;
  white-space:pre-wrap;
  border:1px solid #1f2a44;
}
.loader{
  text-align:center;
  padding:40px;
  color:#94a3b8;
}
.toast{
  position:fixed;
  bottom:20px;
  left:50%;
  transform:translateX(-50%);
  background:#1e293b;
  padding:10px 18px;
  border-radius:10px;
  border:1px solid #38bdf8;
  display:none;
}
</style>
</head>

<body>
<div class="container">
  <div id="app" class="loader">ƒêang t·∫£i script...</div>
</div>

<div id="toast" class="toast">ƒê√£ sao ch√©p script!</div>

<script>
const SITE = "https://scriptblox.com";
const PROXY = "https://api.allorigins.win/raw?url=";

function qs(s){return document.querySelector(s);}
function getId(){
  const p = new URLSearchParams(location.search);
  return p.get("id");
}

async function fetchHTML(url){
  const res = await fetch(PROXY + encodeURIComponent(url));
  return await res.text();
}

function normalize(url){
  if(!url) return "";
  if(url.startsWith("http")) return url;
  if(url.startsWith("//")) return "https:" + url;
  if(url.startsWith("/")) return SITE + url;
  return SITE + "/" + url;
}

function showToast(){
  const t = qs("#toast");
  t.style.display = "block";
  setTimeout(()=> t.style.display="none",1500);
}

async function load(){
  const id = getId();
  if(!id){
    qs("#app").innerHTML = "Thi·∫øu ID script";
    return;
  }

  const html = await fetchHTML(`${SITE}/script/${id}`);
  const doc = new DOMParser().parseFromString(html,"text/html");

  const title = doc.querySelector("h1")?.innerText || id;
  const img = normalize(doc.querySelector("img")?.getAttribute("src") || "");
  const meta = doc.querySelector("p")?.innerText || "";
  const code = doc.querySelector("pre")?.innerText || "Kh√¥ng l·∫•y ƒë∆∞·ª£c n·ªôi dung script.";

  qs("#app").innerHTML = `
    <img src="${img}">
    <h1>${title}</h1>
    <div class="meta">${meta}</div>
    <button class="copy-btn" onclick="copyCode()">üìã Sao ch√©p script</button>
    <pre id="scriptCode">${code.replace(/</g,"&lt;")}</pre>
  `;
}

function copyCode(){
  const text = qs("#scriptCode").innerText;
  navigator.clipboard.writeText(text).then(showToast);
}

load();
</script>
</body>
</html>
